---
lab:
  az204Title: 'Lab 10: Asynchronously process messages by using Azure Service Bus Queues'
  az020Title: 'Lab 10: Asynchronously process messages by using Azure Service Bus Queues'
  az204Module: 'Module 10: Develop message-based solutions'
  az020Module: 'Module 10: Develop message-based solutions'
ms.openlocfilehash: b9134b549931690a3b6f0d596cab89f67b3f2a69
ms.sourcegitcommit: ddc44a8b5edc7ce2d93849bcab6c6a83dee1c99b
ms.translationtype: HT
ms.contentlocale: id-ID
ms.lasthandoff: 04/29/2022
ms.locfileid: "145196236"
---
# <a name="lab-10-asynchronously-process-messages-by-using-azure-service-bus-queues"></a>Lab 10: Memproses pesan secara asinkron dengan menggunakan Antrean Azure Service Bus

## <a name="microsoft-azure-user-interface"></a>Antarmuka pengguna Microsoft Azure

Mengingat sifat dinamis dari alat cloud Microsoft, Anda mungkin mengalami perubahan antarmuka pengguna Azure yang terjadi setelah pengembangan konten pelatihan ini. Akibatnya, instruksi lab dan langkah-langkah lab mungkin tidak selaras dengan benar.

Microsoft memperbarui kursus pelatihan ini ketika komunitas memberi tahu kami tentang perubahan yang diperlukan. Tetapi, pembaruan cloud sering terjadi, sehingga Anda mungkin mengalami perubahan antarmuka pengguna sebelum pembaruan konten pelatihan ini. **Jika hal ini terjadi, sesuaikan dengan perubahan, lalu kerjakan perubahan di lab sesuai kebutuhan.**

## <a name="instructions"></a>Instruksi

### <a name="before-you-start"></a>Sebelum Anda memulai

#### <a name="sign-in-to-the-lab-environment"></a>Masuk ke lingkungan lab

Masuk ke mesin virtual (VM) Windows 10 Anda menggunakan kredensial berikut:
    
-   Nama pengguna: **Admin**

-   Kata sandi: **Pa55w.rd**

> **Catatan**: Instruktur Anda akan memberikan instruksi untuk terhubung ke lingkungan lab virtual.

#### <a name="review-the-installed-applications"></a>Meninjau aplikasi yang diinstal

Temukan taskbar di desktop Windows 10 Anda. Taskbar berisi ikon untuk aplikasi yang akan Anda gunakan di lab ini, termasuk:
    
-   Microsoft Edge

-   Visual Studio Code

## <a name="architecture-diagram"></a>Diagram arsitektur

![Diagram arsitektur yang menggambarkan pengguna memproses pesan secara asinkron menggunakan Antrean Azure Service Bus](./media/Lab10-Diagram.png)

### <a name="exercise-1-create-azure-resources"></a>Latihan 1: Membuat sumber daya Azure

#### <a name="task-1-open-the-azure-portal"></a>Tugas 1: Membuka portal Azure

1.  Pada taskbar, pilih ikon **Microsoft Edge**.

1.  Di jendela browser, telusuri portal Azure ([portal.azure.com](https://portal.azure.com)) dan masuk dengan akun yang akan Anda gunakan untuk lab ini.

    > **Catatan**: Jika ini pertama kalinya Anda masuk ke portal Microsoft Azure, Anda akan diberikan penawaran tur portal. Pilih **Memulai** untuk melewati tur dan mulai menggunakan portal.

#### <a name="task-2-create-an-azure-service-bus-queue"></a>Tugas 2: Membuat antrian Azure Service Bus

1.  Di portal Microsoft Azure, gunakan kotak teks **Cari sumber daya, layanan, dan dokumen** untuk mencari **Service Bus** dan kemudian, dalam daftar hasil, pilih **Service Bus**.

1.  Pada panel **Microsoft Azure Service Bus**, pilih **+ Buat**.

1.  Pada panel **Buat namespace**, pada tab **Dasar**, lakukan tindakan berikut, dan pilih **Tinjau + buat**:
        
    | Pengaturan                           | Tindakan                                                       |
    | --------------------------------- | ------------------------------------------------------------ |
    | Daftar menurun **Langganan**    |Pertahankan nilai default. |
    | Bagian **Grup sumber daya** | Pilih **Buat baru**, masukkan **AsyncProcessor**, lalu pilih **OK**.|
    | Kotak teks **Nama namespace** | Masukkan **sbnamespace** _[namaanda]_ .|
    | Daftar menurun **Wilayah** |  Pilih wilayah Azure tempat Anda dapat menyebarkan Azure Service Bus.|
    | Daftar menurun **Tingkat harga** |  Pilih **Dasar**.|

    Tangkapan layar berikut menampilkan pengaturan yang dikonfigurasi pada tab **Dasar** pada bilah **Buat namespace**.
    
       ![Buat bilah namespace Azure Service Bus](./media/l10_create_sb_namespace.png)
     
1.  Pada tab **Tinjau + buat**, tinjau opsi yang Anda pilih di langkah sebelumnya.

1.  Pilih **Buat** untuk membuat namespace **Azure Service Bus** dengan menggunakan konfigurasi yang Anda tentukan.

    > **Catatan**: Tunggu hingga tugas pembuatan selesai sebelum Anda melanjutkan ke lab ini.

1.  Pada panel **Penyebaran**, pilih tombol **Buka sumber daya** untuk menavigasi ke panel namespace **Azure Service Bus** yang baru dibuat.

1.  Pada panel namespace **Azure Service Bus**, di bagian **Pengaturan**, pilih **Kebijakan akses bersama**.

1.  Dalam daftar kebijakan, pilih **RootManageSharedAccessKey**.

1.  Tentang **Kebijakan SAS: Panel RootManageSharedAccessKey**, di samping entri **Primary Connection String**, pilih tombol **Salin ke papan klip**, dan catat nilai yang disalin. Anda akan menggunakannya nanti di lab ini.

    > **Catatan**: Tidak masalah yang mana dari dua kunci yang tersedia yang Anda pilih. Mereka dapat dipertukarkan.

1.  Pada panel namespace **Azure Service Bus**, di bagian **Entitas**, pilih **Antrean**, lalu pilih **+ Antrean**.

1.  Pada panel **Buat antrean**, tinjau pengaturan yang tersedia, di kotak teks **Nama**, masukkan **antrean pesan**, lalu pilih **Buat**.

1.  Pilih **antrean pesan** untuk menampilkan properti antrean **Azure Service Bus**.

1.  Biarkan jendela browser terbuka. Anda akan menggunakannya lagi nanti di lab ini.

#### <a name="review"></a>Tinjau

Dalam latihan ini, Anda membuat ruang nama **Service Bus** Azure dan antrean **Azure Service Bus** yang akan Anda gunakan melalui sisa lab.

### <a name="exercise-2-create-a-net-core-project-to-publish-messages-to-a-service-bus-queue"></a>Latihan 2: Buat proyek .NET Core untuk mempublikasikan pesan ke antrean Azure Service Bus

#### <a name="task-1-create-a-net-core-project"></a>Tugas 1: Buat proyek .NET Core

1.  Dari komputer lab, mulai Visual Studio Code.

1.  Dalam Visual Studio Code, dalam menu **File**, pilih **Buka Folder**.

1.  Di jendela **Buka Folder**, telusuri **Allfiles (F):\\Allfiles\\Labs\\10\\Starter\\MessagePublisher**, lalu pilih **Pilih Folder**.

1.  Di jendela **Visual Studio Code**, aktifkan menu pintasan, lalu pilih **Buka di Terminal Terintegrasi**.

1.  Pada prompt terminal, jalankan perintah berikut untuk membuat proyek .NET baru bernama **MessagePublisher** di folder saat ini:

    ```
    dotnet new console --name MessagePublisher --output .
    ```

    > **Catatan**: Perintah **dotnet new** akan membuat proyek **konsol** baru dalam folder dengan nama yang sama dengan proyek tersebut.

1.  Jalankan perintah berikut untuk mengimpor paket **Azure.Messaging.ServiceBus** versi 7.2.1 dari NuGet:

    ```
    dotnet add package Azure.Messaging.ServiceBus --version 7.2.1
    ```

    > **Catatan**: Perintah **dotnet add package** akan menambahkan paket **Azure.Messaging.ServiceBus** dari NuGet. Untuk informasi selengkapnya, buka [Azure.Messaging.ServiceBus](https://www.nuget.org/packages/Azure.Messaging.ServiceBus/).

1.  Pada prompt terminal, jalankan perintah berikut untuk membangun aplikasi konsol .NET Core:

    ```
    dotnet build
    ```

1.  Pilih **Kill Terminal** (ikon **Keranjang Sampah**) untuk menutup panel terminal dan semua proses terkait.

#### <a name="task-2-publish-messages-to-an-azure-service-bus-queue"></a>Tugas 2: Publikasikan pesan ke antrean Azure Service Bus

1.  Di panel **Explorer** pada jendela **Visual Studio Code**, buka file **Program.cs**.

1.  Pada tab editor kode untuk file **Program.cs**, hapus semua kode dalam file yang ada.

1.  Tambahkan baris kode berikut untuk memfasilitasi penggunaan ruang nama bawaan yang akan dirujuk dalam file ini:

    ```csharp
    using System;
    using System.Threading.Tasks;
    ```

1.  Tambahkan kode berikut untuk mengimpor namespace **Azure.Messaging.ServiceBus** yang disertakan dalam paket **Azure.Storage.Queues** yang diimpor dari NuGet:

    ```csharp
    using Azure.Messaging.ServiceBus;
    ```
    
1.  Masukkan kode berikut untuk membuat kelas **Program** baru di ruang nama MessagePublisher:

    ```csharp
    namespace MessagePublisher
    {
       public class Program
       {
       }
    }
    ```

1.  Di kelas **Program**, masukkan kode berikut untuk membuat konstanta string bernama **storageConnectionString**:

    ```csharp
    private const string storageConnectionString = "";
    ```

1.  Perbarui konstanta string **storageConnectionString** dengan mengatur nilainya ke **Primary Connection String** dari namespace Azure Service Bus yang Anda rekam sebelumnya di lab ini.

1.  Masukkan kode berikut untuk membuat konstanta string bernama **queueName** dengan nilai **messagequeue**, cocok dengan nama antrean Microsoft Azure Service Bus yang Anda buat sebelumnya dalam latihan ini.

    ```csharp
    private const string queueName = "messagequeue";
    ```

1.  Masukkan kode berikut untuk membuat konstanta integer yang menyimpan jumlah pesan yang akan dikirim ke antrean target:

    ```csharp
    private const int numOfMessages = 3;
    ```

1.  Masukkan kode berikut untuk membuat klien Bus Layanan yang akan memiliki koneksi ke antrean target:

    ```csharp
    static ServiceBusClient client;
    ```

1.  Masukkan kode berikut untuk membuat pengirim Microsoft Azure Service Bus yang akan digunakan untuk mempublikasikan pesan ke antrean target:

    ```csharp
    static ServiceBusSender sender;
    ```

1.  Masukkan kode berikut untuk membuat metode **Utama** asinkron:

    ```csharp
    public static async Task Main(string[] args)
    {
    }
    ```

1.  Tinjau file **Program.cs**, yang sekarang harus menyertakan kode berikut. Perhatikan bahwa tempat penampung `<storage-connection-string>` mewakili string koneksi ke namespace Azure Service Bus target:

    ```csharp
    using System;
    using System.Threading.Tasks;
    using Azure.Messaging.ServiceBus;
    namespace MessagePublisher
    {
        public class Program
        {
            private const string storageConnectionString = "<storage-connection-string>";
            private const string queueName = "messagequeue";
            private const int numOfMessages = 3;
            static ServiceBusClient client;
            static ServiceBusSender sender;
            public static async Task Main(string[] args)
            {
            }
        }
    }
    ```

1.  Dalam metode **Utama**, tambahkan kode berikut untuk menginisialisasi *klien* jenis **ServiceBusClient** yang akan menyediakan konektivitas ke namespace Microsoft Azure Service Bus dan **pengirim** yang akan bertanggung jawab untuk mengirim pesan:

    ```csharp
    client = new ServiceBusClient(storageConnectionString);
    sender = client.CreateSender(queueName);  
    ```

    > **Catatan**: Klien Bus Layanan aman untuk ditembolok dan digunakan sebagai databese tunggal selama masa pakai aplikasi. Ini dianggap sebagai salah satu praktik terbaik saat memublikasikan dan membaca pesan secara teratur.

1.  Dalam metode **Utama**, tambahkan kode berikut untuk membuat objek **ServiceBusMessageBatch** yang memungkinkan Anda menggabungkan beberapa pesan ke dalam kumpulan menggunakan metode **TryAddMessage**:

    ```csharp
    using ServiceBusMessageBatch messageBatch = await sender.CreateMessageBatchAsync();
    ```

1.  Dalam metode **Utama**, tambahkan baris kode berikut untuk menambahkan pesan ke kumpulan dan berikan pengecualian jika ukuran pesan melebihi batas yang didukung oleh kumpulan:

    ```csharp
    for (int i = 1; i <= numOfMessages; i++)
    {
        if (!messageBatch.TryAddMessage(new ServiceBusMessage($"Message {i}")))
        {
            throw new Exception($"The message {i} is too large to fit in the batch.");
        }
    }
    ```

1.  Dalam metode **Utama**, tambahkan baris kode berikut untuk membuat blok percobaan, dengan **pengirim** secara asinkron menerbitkan pesan dalam batch ke antrean target:

    ```csharp
    try
    {
        await sender.SendMessagesAsync(messageBatch);
        Console.WriteLine($"A batch of {numOfMessages} messages has been published to the queue.");
    }
    ```

1.  Dalam metode **Utama**, tambahkan baris kode berikut untuk membuat blok terakhir yang secara asinkron membuang objek **pengirim** dan **klien**, melepaskan semua jaringan dan sumber daya yang tidak dikelola :

    ```csharp
    finally
    {
        await sender.DisposeAsync();
        await client.DisposeAsync();
    }
    ```

1.  Tinjau metode **Utama**, yang seharusnya terdiri atas kode berikut: 

    ```csharp
    public static async Task Main(string[] args)
    {
        client = new ServiceBusClient(storageConnectionString);
        sender = client.CreateSender(queueName);
        using ServiceBusMessageBatch messageBatch = await sender.CreateMessageBatchAsync();
        for (int i = 1; i <= numOfMessages; i++)
        {
            if (!messageBatch.TryAddMessage(new ServiceBusMessage($"Message {i}")))
            {
                throw new Exception($"The message {i} is too large to fit in the batch.");
            }
        }
        try
        {
            await sender.SendMessagesAsync(messageBatch);
            Console.WriteLine($"A batch of {numOfMessages} messages has been published to the queue.");
        }
        finally
        {
            await sender.DisposeAsync();
            await client.DisposeAsync();
        }
    }
    ```

1.  Simpan file **Program.cs**.

1.  Di jendela **Visual Studio Code**, aktifkan menu pintasan, lalu pilih **Buka di Terminal Terintegrasi**.

1.  Pada prompt terminal, jalankan perintah berikut untuk meluncurkan aplikasi konsol .NET Core:

    ```
    dotnet run
    ```

    > **Catatan**: Jika Anda menemukan kesalahan, tinjau file **Program.cs** di folder **Allfiles (F):\\Allfiles\\Labs\\10\\Solution\\MessagePublisher**.

1.  Verifikasi bahwa pesan konsol yang ditampilkan pada prompt terminal menyatakan bahwa kumpulan tiga pesan telah diterbitkan ke antrean.

1.  Pilih **Kill Terminal** (ikon **Keranjang Sampah**) untuk menutup panel terminal dan semua proses terkait.

1.  Beralih ke browser Microsoft Edge yang menampilkan antrean Azure Service Bus **messagequeue** di portal Azure.

1.  Tinjau panel **Essentials** dan perhatikan bahwa antrean berisi tiga pesan aktif.

    Tangkapan layar berikut menampilkan metrik antrean Azure Service Bus dan jumlah pesan.
     
       ![Metrik antrean Azure Service Bus dan jumlah pesan di portal Azure](./media/l10_display_queue_with_messages_portal.png)
     
1.  Di bagian **Pengaturan**, pilih **Penjelajah Azure Service Bus (pratinjau)** .

1.  Pada panel **Penjelajah Azure Service Bus (pratinjau)** , pilih header tab **Intip** dan, pada tab **Intip**, pilih tombol **Intip**.

1.  Verifikasi bahwa antrean berisi tiga pesan.

1.  Pilih pesan pertama dan tinjau kontennya di panel **Pesan**.

    Tangkapan layar berikut menampilkan konten pesan pertama.
         
       ![Konten antrean Azure Service Bus di Penjelajah Service Bus](./media/l10_peek_queue_with_messages_explorer.png)

     
1.  Tutup panel **Pesan**.

#### <a name="review"></a>Tinjau

Dalam latihan ini, Anda mengonfigurasi proyek .NET Anda yang menerbitkan pesan ke dalam antrean Azure Service Bus.

### <a name="exercise-3-create-a-net-core-project-to-read-messages-from-a-service-bus-queue"></a>Latihan 3: Membuat proyek .NET Core untuk membaca pesan dari antrean Service Bus

#### <a name="task-1-create-a-net-project"></a>Tugas 1: Membuat proyek .NET

1.  Dari komputer lab, mulai Visual Studio Code.

1.  Dalam Visual Studio Code, dalam menu **File**, pilih **Buka Folder**.

1.  Di jendela **Buka Folder**, telusuri **Allfiles (F):\\Allfiles\\Labs\\10\\Starter\\MessageReader**, lalu pilih **Pilih Folder**.

1.  Di jendela **Visual Studio Code**, aktifkan menu pintasan, lalu pilih **Buka di Terminal Terintegrasi**.

1.  Pada prompt terminal, jalankan perintah berikut untuk membuat proyek .NET baru bernama **MessageReader** di folder saat ini:

    ```
    dotnet new console --name MessageReader --output .
    ```

1.  Jalankan perintah berikut untuk mengimpor paket **Azure.Messaging.ServiceBus** versi 7.2.1 dari NuGet:

    ```
    dotnet add package Azure.Messaging.ServiceBus --version 7.2.1
    ```

1.  Pada prompt terminal, jalankan perintah berikut untuk membangun aplikasi konsol .NET Core:

    ```
    dotnet build
    ```

1.  Pilih **Kill Terminal** (ikon **Keranjang Sampah**) untuk menutup panel terminal dan semua proses terkait.

#### <a name="task-2-read-messages-from-an-azure-service-bus-queue"></a>Tugas 2: Membaca pesan dari antrean Azure Service Bus

1.  Di panel **Explorer** pada jendela **Visual Studio Code**, buka file **Program.cs**.

1.  Pada tab editor kode untuk file **Program.cs**, hapus semua kode dalam file yang ada.

1.  Tambahkan kode yang sama yang disertakan dalam file Program.cs untuk memungkinkan interaksi dengan antrean Azure Service Bus, tetapi atur namespace ke **MessageReader**:

    ```csharp
    using System;
    using System.Threading.Tasks;
    using Azure.Messaging.ServiceBus;
    namespace MessageReader
    {
       public class Program
       {
          private const string storageConnectionString = "";
          static string queueName = "messagequeue";
          static ServiceBusClient client;
       }
    }
    ```

1.  Seperti sebelumnya, perbarui konstanta string **storageConnectionString** dengan mengatur nilainya ke **String Koneksi Utama** dari namespace **Azure Service Bus** yang Anda rekam sebelumnya di lab ini.

1.  Masukkan kode berikut untuk membuat ServiceBusProcessor yang akan digunakan untuk memproses pesan dari antrean:

    ```csharp
    static ServiceBusProcessor processor;
    ```

1.  Masukkan kode berikut untuk membuat tugas **MessageHandler** asinkron statik yang menampilkan isi pesan dalam antrean saat diproses dan menghapusnya setelah pemrosesan selesai:

    ```csharp
    static async Task MessageHandler(ProcessMessageEventArgs args)
    {
        string body = args.Message.Body.ToString();
        Console.WriteLine($"Received: {body}");
        await args.CompleteMessageAsync(args.Message);
    }
    ```

1.  Masukkan kode berikut untuk membuat tugas **ErrorHandler** asinkron statik yang mengelola pengecualian apa pun yang ditemukan selama pemrosesan pesan:

    ```csharp
    static Task ErrorHandler(ProcessErrorEventArgs args)
    {
        Console.WriteLine(args.Exception.ToString());
        return Task.CompletedTask;
    }
    ```

1.  Masukkan kode berikut untuk membuat metode **Utama** asinkron:

    ```csharp
    static async Task Main(string[] args)
    {
    }
    ```

1.  Tinjau file **Program.cs**, yang sekarang harus menyertakan kode berikut. Tempat penampung `<storage-connection-string>` mewakili string koneksi ke namespace Azure Service Bus target:

    ```csharp
    using System;
    using System.Threading.Tasks;
    using Azure.Messaging.ServiceBus;
    namespace MessageReader
    {
        class Program
        {
            static string storageConnectionString = "";
            static string queueName = "messagequeue";
            static ServiceBusClient client;
            static ServiceBusProcessor processor;
            static async Task MessageHandler(ProcessMessageEventArgs args)
            {
                string body = args.Message.Body.ToString();
                Console.WriteLine($"Received: {body}");
                await args.CompleteMessageAsync(args.Message);
            }
            static Task ErrorHandler(ProcessErrorEventArgs args)
            {
                Console.WriteLine(args.Exception.ToString());
                return Task.CompletedTask;
            }
            static async Task Main()
            {
            }
        }
    }
    ```

1.  Dalam metode **Utama**, tambahkan kode berikut untuk menginisialisasi *klien* jenis **ServiceBusClient** yang akan menyediakan konektivitas ke namespace Azure Service Bus dan **prosesor** yang akan bertanggung jawab untuk memproses pesan:

    ```csharp
    client = new ServiceBusClient(storageConnectionString);
    processor = client.CreateProcessor(queueName, new ServiceBusProcessorOptions());
    ```

    > **Catatan**: Seperti disebutkan sebelumnya, klien Service Bus aman untuk ditembolok dan digunakan sebagai database tunggal selama masa pakai aplikasi. Ini dianggap sebagai salah satu praktik terbaik saat memublikasikan dan membaca pesan secara teratur.

1.  Dalam metode **Utama**, tambahkan baris kode berikut untuk membuat blok percobaan, yang pertama-tama mengimplementasikan pengendali pemrosesan pesan dan kesalahan, memulai pemrosesan pesan, dan berhenti memproses setelah masukan pengguna:

    ```csharp
    try
    {
        processor.ProcessMessageAsync += MessageHandler;
        processor.ProcessErrorAsync += ErrorHandler;
        await processor.StartProcessingAsync();
        Console.WriteLine("Wait for a minute and then press any key to end the processing");
        Console.ReadKey();
        Console.WriteLine("\nStopping the receiver...");
        await processor.StopProcessingAsync();
        Console.WriteLine("Stopped receiving messages");
    }
    ```

1.  Dalam metode **Utama**, tambahkan baris kode berikut untuk membuat blok terakhir yang secara asinkron membuang objek **prosesor** dan **klien**, melepaskan semua jaringan dan sumber daya yang tidak dikelola :

    ```csharp
    finally
    {
        await processor.DisposeAsync();
        await client.DisposeAsync();
    }
    ```

1.  Tinjau metode **Utama**, yang seharusnya terdiri atas kode berikut:

    ```csharp
    static async Task Main()
    {
        client = new ServiceBusClient(storageConnectionString);
        processor = client.CreateProcessor(queueName, new ServiceBusProcessorOptions());
        try
        {
            processor.ProcessMessageAsync += MessageHandler;
            processor.ProcessErrorAsync += ErrorHandler;
            await processor.StartProcessingAsync();
            Console.WriteLine("Wait for a minute and then press any key to end the processing");
            Console.ReadKey();
            Console.WriteLine("\nStopping the receiver...");
            await processor.StopProcessingAsync();
            Console.WriteLine("Stopped receiving messages");
        }
        finally
        {
            await processor.DisposeAsync();
            await client.DisposeAsync();
        }
    }
    ```

1.  Simpan file **Program.cs**.

1.  Di jendela **Visual Studio Code**, aktifkan menu pintasan, lalu pilih **Buka di Terminal Terintegrasi**.

1.  Pada prompt terminal, jalankan perintah berikut untuk meluncurkan aplikasi konsol .NET Core:

    ```
    dotnet run
    ```

    > **Catatan**: Jika Anda menemukan kesalahan, tinjau file **Program.cs** di folder **Allfiles (F):\\Allfiles\\Labs\\10\\Solution\\MessageReader**.

1.  Verifikasi bahwa pesan konsol yang ditampilkan pada prompt terminal menyatakan bahwa masing-masing dari tiga pesan dalam antrean telah diterima.

1.  Pada prompt terminal, tekan sembarang tombol untuk menghentikan penerima dan menghentikan eksekusi aplikasi.

1.  Pilih **Kill Terminal** (ikon **Keranjang Sampah**) untuk menutup panel terminal dan semua proses terkait.

1.  Beralih kembali ke browser Microsoft Edge yang menampilkan antrean Azure Service Bus **messagequeue** di portal Azure.

1.  Pada panel **Penjelajah Azure Service Bus (preview)** , pilih **Refresh**, dan perhatikan bahwa jumlah pesan aktif dalam antrean telah berubah menjadi **0**.

#### <a name="review"></a>Tinjau

Dalam latihan ini, Anda membaca dan menghapus pesan dari antrean Azure Service Bus dengan menggunakan pustaka .NET.

### <a name="exercise-4-clean-up-your-subscription"></a>Latihan 4: Membersihkan langganan Anda

#### <a name="task-1-open-azure-cloud-shell"></a>Tugas 1: Membuka Azure Cloud Shell

1.  Di portal Microsoft Azure, pilih ikon **Cloud Shell** ![ikon Cloud Shell](./media/az204_lab_CloudShell.png) untuk membuka sesi Bash baru. Jika Cloud Shell default ke sesi PowerShell, pilih **PowerShell** dan, di menu drop-down, pilih **Bash**.

    > **Catatan**: Jika ini pertama kalinya Anda memulai **Cloud Shell**, saat diminta untuk memilih **Bash** atau **PowerShell**, pilih **PowerShell**. Saat Anda melihat pesan **Anda tidak memiliki penyimpanan yang terpasang**, pilih langganan yang Anda gunakan di lab ini, dan pilih **Buat penyimpanan**.

#### <a name="task-2-delete-resource-groups"></a>Tugas 2: Menghapus grup sumber daya

1.  Di panel **Cloud Shell**, jalankan perintah berikut untuk menghapus grup sumber daya **AsyncProcessor**:

    ```
    az group delete --name AsyncProcessor --no-wait --yes
    ```
    
     > **Catatan**: Perintah dijalankan secara asinkron (seperti yang ditentukan oleh parameter *--no-wait*), jadi meskipun Anda dapat menjalankan perintah Azure CLI lain segera setelahnya dalam sesi Bash yang sama, akan memakan waktu beberapa menit sebelum grup sumber daya benar-benar dihapus.
  
1.  Tutup panel **Cloud Shell** di portal.

#### <a name="task-3-close-the-active-applications"></a>Tugas 3: Menutup aplikasi yang aktif

1.  Tutup aplikasi Microsoft Edge yang sedang berjalan.

1.  Tutup aplikasi Visual Studio Code yang sedang berjalan.

#### <a name="review"></a>Tinjau

Dalam latihan ini, Anda membersihkan langganan Anda dengan menghapus grup sumber daya yang digunakan di lab ini.
