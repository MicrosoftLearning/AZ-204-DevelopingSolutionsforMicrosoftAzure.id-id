---
lab:
  az204Title: 'Lab 03: Retrieve Azure Storage resources and metadata by using the Azure Storage SDK for .NET'
  az020Title: 'Lab 03: Retrieve Azure Storage resources and metadata by using the Azure Storage SDK for .NET'
  az204Module: 'Module 03: Develop solutions that use blob storage'
  az020Module: 'Module 03: Develop solutions that use blob storage'
ms.openlocfilehash: 77898d84e3d0792d4204fe859ad048538fbe1e36
ms.sourcegitcommit: 6261eafb2dcb0dc4f73739ba0308bcfc620c5e53
ms.translationtype: HT
ms.contentlocale: id-ID
ms.lasthandoff: 06/07/2022
ms.locfileid: "146175356"
---
# <a name="lab-03-retrieve-azure-storage-resources-and-metadata-by-using-the-azure-storage-sdk-for-net"></a>Lab 03: Mengambil sumber daya dan metadata Azure Storage menggunakan SDK Azure Storage untuk .NET

## <a name="microsoft-azure-user-interface"></a>Antarmuka pengguna Microsoft Azure

Mengingat sifat dinamis alat cloud Microsoft, Anda mungkin mengalami perubahan antarmuka pengguna (UI) Azure yang terjadi setelah pengembangan konten pelatihan ini. Akibatnya, instruksi lab dan langkah-langkah lab mungkin tidak selaras dengan benar.

Microsoft memperbarui kursus pelatihan ini ketika komunitas memberi tahu kami tentang perubahan yang diperlukan. Tetapi, pembaruan cloud sering terjadi, sehingga Anda mungkin mengalami perubahan antarmuka pengguna sebelum pembaruan konten pelatihan ini. **Jika hal ini terjadi, sesuaikan dengan perubahan, lalu kerjakan perubahan di lab sesuai kebutuhan.**

## <a name="instructions"></a>Petunjuk

### <a name="before-you-start"></a>Sebelum memulai

#### <a name="sign-in-to-the-lab-environment"></a>Masuk ke lingkungan lab

Masuk ke mesin virtual (VM) Windows 10 Anda menggunakan kredensial berikut:

-   Nama pengguna: **Admin**

-   Kata sandi: **Pa55w.rd**

> **Catatan**: Instruktur Anda akan memberikan instruksi untuk terhubung ke lingkungan lab virtual.

#### <a name="review-the-installed-applications"></a>Meninjau aplikasi yang diinstal

Temukan taskbar di desktop Windows 10 Anda. Taskbar berisi ikon untuk aplikasi yang akan Anda gunakan di lab ini, termasuk:

-   Microsoft Edge

-   File Explorer

## <a name="architecture-diagram"></a>Diagram arsitektur

![Diagram arsitektur yang menggambarkan pengguna mengambil sumber daya dan metadata Azure Storage dengan menggunakan SDK Azure Storage untuk .NET.](./media/Lab03-Diagram.png)

### <a name="exercise-1-create-azure-resources"></a>Latihan 1: Membuat sumber daya Azure

#### <a name="task-1-open-the-azure-portal"></a>Tugas 1: Membuka portal Microsoft Azure

1.  Pada taskbar, pilih ikon **Microsoft Edge**.

1. Di jendela browser, jelajahi portal Microsoft Azure (<https://portal.azure.com>), lalu masuk dengan akun yang akan Anda gunakan untuk lab ini.

   > **Catatan**: Jika ini pertama kalinya Anda masuk ke portal Microsoft Azure, Anda akan diberikan penawaran tur portal. Pilih **Memulai** untuk melewati tur dan mulai menggunakan portal.

#### <a name="task-2-create-a-storage-account"></a>Tugas 2: Membuat akun Penyimpanan

1.  Di portal Microsoft Azure, gunakan kotak teks **Cari sumber daya, layanan, dan dokumen** untuk mencari **Akun Penyimpanan**, lalu dalam daftar hasil, pilih **Akun Penyimpanan**.

1.  Pada panel **Akun penyimpanan**, pilih **+ Buat**.

1.  Pada panel **Buat akun penyimpanan**, pada tab **Dasar**, lakukan tindakan berikut, lalu pilih **Tinjauan + buat**:

   | Pengaturan                           | Tindakan                                                       |
   | --------------------------------- | ------------------------------------------------------------ |
   | Daftar dropdown **Langganan**   | Pertahankan nilai default.                                    |
   | Bagian **Grup sumber daya**        | Pilih **Buat baru**, masukkan **StorageMedia**, lalu pilih **OK**. |
   | Kotak teks **Nama akun penyimpanan** | Masukkan **mediator** _[namaanda]_ .                             |
   | Daftar dropdown **Wilayah**         | Pilih **(AS) US Timur**.                                     |
   | Bagian **Performa**           | Pilih opsi **Standar**.                              |
   | Daftar dropdown **Redundansi**     | pilih **Penyimpanan redundan secara lokal (LRS)** .                  |

   Cuplikan layar berikut menampilkan pengaturan yang dikonfigurasi pada **Buat panel akun penyimpanan**.
 
   ![Membuat panel akun penyimpanan](./media/l03_create_a_storage_account.png)
   
1.  Pada tab **Tinjauan + buat**, tinjau opsi yang Anda pilih di langkah sebelumnya. sebelumnya.

1.  Pilih **Buat** untuk membuat akun penyimpanan menggunakan konfigurasi yang Anda tentukan.

    > **Catatan**: Tunggu hingga tugas pembuatan selesai sebelum melanjutkan dengan lab ini.

1.  Pilih **Buka sumber daya**.

1.  Pada panel **Akun penyimpanan**, di bagian **Pengaturan**, pilih tautan **Titik Akhir**.

1.  Di bagian **Titik Akhir**, salin nilai kotak teks **Layanan Blob** ke clipboard.

    > **Catatan**: Anda akan menggunakan nilai titik akhir ini nanti di lab.

1.  Buka Notepad, lalu tempel nilai layanan blob yang disalin ke Notepad.

1.  Pada panel **Akun penyimpanan**, di bagian **Keamanan + jaringan**, pilih **Kunci akses**.

1.  Salin nilai **Nama akun penyimpanan** ke clipboard, lalu tempelkan ke Notepad.

1.  Pada panel **Kunci akses**, pilih **Tampilkan kunci**.

1.  Tinjauan salah satu kunci, lalu salin nilai salah satu kotak **Kunci** ke clipboard.

    > **Catatan**: Anda akan menggunakan semua nilai ini nanti di lab ini.

#### <a name="review"></a>Tinjauan

Dalam latihan ini, Anda membuat akun Penyimpanan baru untuk digunakan di seluruh sisa lab.

### <a name="exercise-2-upload-a-blob-into-a-container"></a>Latihan 2: Mengunggah blob ke dalam kontainer

#### <a name="task-1-create-storage-account-containers"></a>Tugas 1: Membuat kontainer akun penyimpanan

1. Pada panel **Akun penyimpanan**, pilih tautan **Kontainer** di bagian **Penyimpanan data**.

1. Di bagian **Kontainer**, pilih **+ Kontainer**.

1. Di jendela pop-up **Kontainer baru**, lakukan tindakan berikut, lalu pilih **Buat**:

    | Pengaturan                                | Tindakan                                    |
    | -------------------------------------- | ----------------------------------------- |
    | Kotak teks **Nama**                      | Masukkan **raster-graphics**.                |
    | Daftar dropdown **tingkat akses publik** | Pilih **Pribadi (tanpa akses anonim)** . |

1. Di bagian **Kontainer**, pilih **+ Kontainer**.

1. Di jendela pop-up **Kontainer baru**, lakukan tindakan berikut, lalu pilih **Buat**:

    | Pengaturan                                | Tindakan                                    |
    | -------------------------------------- | ----------------------------------------- |
    | Kotak teks **Nama**                      | Masukkan **compressed-audio**.               |
    | Daftar dropdown **tingkat akses publik** | Pilih **Pribadi (tanpa akses anonim)** . |

1. Di bagian **Kontainer**, amati daftar kontainer yang diperbarui.

    Cuplikan layar berikut menampilkan pengaturan yang dikonfigurasi pada **Buat panel akun penyimpanan**.

    ![Membuat panel akun penyimpanan](./media/l03_containers.png)

#### <a name="task-2-upload-a-storage-account-blob"></a>Tugas 2: Mengunggah blob akun penyimpanan

1.  Di bagian **Kontainer**, pilih kontainer **raster-graphics** yang baru saja dibuat.

1.  Pada panel **Kontainer**, pilih **Unggah**.

1.  Di jendela **Unggah blob**, lakukan tindakan berikut, lalu pilih **Unggah**:

   | Pengaturan                           | Tindakan                                                       |
   | --------------------------------- | ------------------------------------------------------------ |
   | Bagian **File**   | Pilih ikon **Folder**.                                    |
   | Jendela **File Explorer**        | Jelajahi **Allfiles (F):\\Allfiles\\Labs\\03\\Starter\\Images**, pilih file **graph.jpg**, lalu pilih **Buka**. |
   | Kotak centang **Timpa jika file sudah ada** | Pastikan bahwa kotak centang dipilih.                        |
   
   > **Catatan**: Tunggu hingga blob diunggah sebelum Anda melanjutkan dengan lab ini.

#### <a name="review"></a>Tinjauan

Dalam latihan ini, Anda membuat kontainer tempat penampung di akun Penyimpanan, lalu mengisi salah satu kontainer dengan blob.

### <a name="exercise-3-access-containers-by-using-the-net-sdk"></a>Latihan 3: Mengakses kontainer dengan menggunakan SDK .NET

#### <a name="task-1-create-net-project"></a>Tugas 1: Membuat proyek .NET

1.  Pada layar **Mulai**, pilih petak peta **Visual Studio Code**.

1.  Pada menu **File**, pilih **Buka Folder**, telusuri ke **Allfiles (F):\\Allfiles\\Labs\\03\\Starter\\ BlobManager**, lalu **Pilih Folder**.

1.  Di jendela **Visual Studio Code**, pada Bilah Menu, pilih **Terminal** lalu pilih **Terminal Baru**.

1.  Di terminal, jalankan perintah berikut untuk membuat proyek .NET baru bernama **BlobManager** di folder saat ini:

    ```
    dotnet new console --name BlobManager --output .
    ```

    > **Catatan**: Perintah **dotnet new** akan membuat proyek **konsol** baru dalam folder dengan nama yang sama dengan proyek tersebut.

1.  Di terminal, jalankan perintah berikut untuk mengimpor versi 12.0.0 dari **Azure.Storage.Blobs** dari NuGet:

    ```
    dotnet add package Azure.Storage.Blobs --version 12.0.0
    ```

    > **Catatan**: Perintah **dotnet add package** akan menambahkan paket **Azure.Storage.Blobs** dari NuGet. Untuk informasi selengkapnya, lihat [Azure.Storage.Blobs](https://www.nuget.org/packages/Azure.Storage.Blobs/12.0.0).

1.  Di terminal, jalankan perintah berikut untuk membangun aplikasi web .NET:

    ```
    dotnet build
    ```

1.  Pilih **Kill Terminal** atau ikon **Keranjang Sampah** untuk menutup terminal yang sedang terbuka dan semua proses terkait.

#### <a name="task-2-modify-the-program-class-to-access-storage"></a>Tugas 2: Mengubah kelas Program untuk mengakses Penyimpanan

1.  Pada panel **Explorer** di jendela **Visual Studio Code**, buka file **Program.cs**.

1.  Pada tab editor kode untuk file **Program.cs**, hapus semua kode dalam file yang ada.

1.  Tambahkan baris kode berikut untuk mengimpor namespace **Azure.Storage**, **Azure.Storage.Blobs**, dan **Azure.Storage.Blobs.Models** dari Paket **Azure.Storage.Blobs** yang diimpor dari NuGet:

    ```csharp
    using Azure.Storage;
    using Azure.Storage.Blobs;
    using Azure.Storage.Blobs.Models;
    ```
    
1.  Tambahkan baris kode berikut untuk menambahkan arahan **using** untuk namespace bawaan yang akan digunakan dalam file ini:

    ```csharp
    using System;
    using System.Threading.Tasks;
    ```

1.  Masukkan kode berikut untuk membuat kelas **Program** baru:

    ```csharp
    public class Program
    {
    }
    ```

1.  Di kelas **Program**, masukkan baris kode berikut untuk membuat konstanta string baru bernama **blobServiceEndpoint**:

    ```csharp
    private const string blobServiceEndpoint = "";
    ```

1.  Perbarui konstanta string **blobServiceEndpoint** dengan mengatur nilainya ke **Titik Akhir Layanan Blob Primer** akun penyimpanan yang Anda catat sebelumnya di lab ini.

1.  Di kelas **Program**, masukkan baris kode berikut untuk membuat konstanta string baru bernama **storageAccountName**:

    ```csharp
    private const string storageAccountName = "";
    ```

1.  Perbarui konstanta string **storageAccountName** dengan mengatur nilainya ke **Nama akun penyimpanan** dari akun penyimpanan yang Anda catat sebelumnya di lab ini.

1.  Di kelas **Program**, masukkan baris kode berikut untuk membuat konstanta string baru bernama **storageAccountKey**:

    ```csharp
    private const string storageAccountKey = "";
    ```

1.  Perbarui konstanta string **storageAccountKey** dengan mengatur nilainya ke **Kunci** akun penyimpanan yang Anda catat sebelumnya di lab ini.

1.  Di kelas **Program**, masukkan kode berikut untuk membuat metode **Main** asinkron baru:

    ```csharp
    public static async Task Main(string[] args)
    {
    }
    ```

1.  Tinjauan file **Program.cs**, yang sekarang harus menyertakan:

    ```csharp
    using Azure.Storage;
    using Azure.Storage.Blobs;
    using Azure.Storage.Blobs.Models;
    using System;
    using System.Threading.Tasks;
    public class Program
    {
        private const string blobServiceEndpoint = "<primary-blob-service-endpoint>";
        private const string storageAccountName = "<storage-account-name>";
        private const string storageAccountKey = "<key>";
        public static async Task Main(string[] args)
        {
        }
    }
    ```

#### <a name="task-3-connect-to-the-azure-storage-blob-service-endpoint"></a>Tugas 3: Menghubungkan ke titik akhir layanan blob Azure Storage

1.  Dalam metode **Main**, tambahkan baris kode berikut untuk membuat instans baru kelas **StorageSharedKeyCredential** menggunakan konstanta **storageAccountName** dan **storageAccountKey** sebagai parameter konstruktor:

    ```csharp
    StorageSharedKeyCredential accountCredentials = new StorageSharedKeyCredential(storageAccountName, storageAccountKey);
    ```

1.  Dalam metode **Main**, tambahkan baris kode berikut untuk membuat instans baru kelas **BlobServiceClient** menggunakan konstanta **blobServiceEndpoint** dan variabel *accountCredentials* sebagai parameter konstruktor:

    ```csharp
    BlobServiceClient serviceClient = new BlobServiceClient(new Uri(blobServiceEndpoint), accountCredentials);
    ```

1.  Dalam metode **Main**, tambahkan baris kode berikut untuk memanggil metode **GetAccountInfoAsync** kelas **BlobServiceClient** untuk mengambil metadata akun dari layanan:

    ```csharp
    AccountInfo info = await serviceClient.GetAccountInfoAsync();
    ```
    
1.  Dalam metode **Main**, tambahkan baris kode berikut untuk membuat pesan selamat datang:

    ```csharp
    await Console.Out.WriteLineAsync($"Connected to Azure Storage Account");
    ```
    
1.  Dalam metode **Main**, tambahkan baris kode berikut untuk merender nama akun penyimpanan:

    ```csharp
    await Console.Out.WriteLineAsync($"Account name:\t{storageAccountName}");
    ```
    
1.  Dalam metode **Main**, tambahkan baris kode berikut untuk merender jenis akun penyimpanan:

    ```csharp
    await Console.Out.WriteLineAsync($"Account kind:\t{info?.AccountKind}");
    ```
    
1.  Dalam metode **Main**, tambahkan baris kode berikut untuk merender unit penyimpanan stok (SKU) yang dipilih saat ini untuk akun penyimpanan:

    ```csharp
    await Console.Out.WriteLineAsync($"Account sku:\t{info?.SkuName}");
    ```

1.  Tinjauan metode **Main**, yang sekarang seharusnya menyertakan:

    ```csharp
    public static async Task Main(string[] args)
    {
        StorageSharedKeyCredential accountCredentials = new StorageSharedKeyCredential(storageAccountName, storageAccountKey);
        BlobServiceClient serviceClient = new BlobServiceClient(new Uri(blobServiceEndpoint), accountCredentials);
        AccountInfo info = await serviceClient.GetAccountInfoAsync();
        await Console.Out.WriteLineAsync($"Connected to Azure Storage Account");
        await Console.Out.WriteLineAsync($"Account name:\t{storageAccountName}");
        await Console.Out.WriteLineAsync($"Account kind:\t{info?.AccountKind}");
        await Console.Out.WriteLineAsync($"Account sku:\t{info?.SkuName}");
    }
    ```

1.  Simpan file **Program.cs**.

1.  Di jendela **Visual Studio Code**, pada Bilah Menu, pilih **Terminal** lalu pilih **Terminal Baru**.

1.  Di terminal, jalankan perintah berikut untuk menjalankan aplikasi web .NET:

    ```
    dotnet run
    ```

    > **Catatan**: Jika ada kesalahan pembuatan, tinjau file **Program.cs** di folder **Allfiles (F):\\Allfiles\\Labs\\03\\Solution\\BlobManager**.

1.  Amati output dari aplikasi konsol yang sedang berjalan. Outputnya berisi metadata untuk akun penyimpanan yang diambil dari layanan.

1.  Pilih **Kill Terminal** atau ikon **Keranjang Sampah** untuk menutup terminal yang sedang terbuka dan semua proses terkait.

#### <a name="task-4-enumerate-the-existing-containers"></a>Tugas 4: Menghitung kontainer yang ada

1.  Di kelas **Program**, masukkan kode berikut untuk membuat metode **private static** baru bernama **EnumerateContainersAsync**, yang asinkron dan memiliki satu jenis parameter **BlobServiceClient**:

    ```csharp
    private static async Task EnumerateContainersAsync(BlobServiceClient client)
    {        
    }
    ```

1.  Dalam metode **EnumerateContainersAsync**, masukkan kode berikut untuk membuat perulangan **foreach** asinkron yang mengulangi hasil pemanggilan metode **GetBlobContainersAsync** dari  **Kelas BlobServiceClient**:

    ```csharp
    await foreach (BlobContainerItem container in client.GetBlobContainersAsync())
    {
    }
    ```

1.  Dalam perulangan **foreach**, masukkan kode berikut untuk mencetak nama setiap kontainer:

    ```csharp
    await Console.Out.WriteLineAsync($"Container:\t{container.Name}");
    ```

1.  Tinjauan metode **EnumerateContainersAsync**, yang sekarang harus menyertakan:

    ```csharp
    private static async Task EnumerateContainersAsync(BlobServiceClient client)
    {        
        await foreach (BlobContainerItem container in client.GetBlobContainersAsync())
        {
            await Console.Out.WriteLineAsync($"Container:\t{container.Name}");
        }
    }
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode untuk memanggil metode **EnumerateContainersAsync**, dengan meneruskan variabel *serviceClient* sebagai parameter:

    ```csharp
    await EnumerateContainersAsync(serviceClient);
    ```

1.  Amati file **Program.cs**, yang sekarang harus menyertakan:

    ```csharp
    using Azure.Storage;
    using Azure.Storage.Blobs;
    using Azure.Storage.Blobs.Models;
    using System;
    using System.Threading.Tasks;
    public class Program
    {
        private const string blobServiceEndpoint = "your blobServiceEndpoint";
        private const string storageAccountName = "your storageAccountName";
        private const string storageAccountKey = "your storageAccountKey";
        public static async Task Main(string[] args)
        {
            StorageSharedKeyCredential accountCredentials = new StorageSharedKeyCredential(storageAccountName, storageAccountKey);BlobServiceClient serviceClient = new     BlobServiceClient(new Uri(blobServiceEndpoint), accountCredentials);
            AccountInfo info = await serviceClient.GetAccountInfoAsync();
            await Console.Out.WriteLineAsync($"Connected to Azure Storage Account");
            await Console.Out.WriteLineAsync($"Account name:\t{storageAccountName}");
            await Console.Out.WriteLineAsync($"Account kind:\t{info?.AccountKind}");
            await Console.Out.WriteLineAsync($"Account sku:\t{info?.SkuName}");
            await EnumerateContainersAsync(serviceClient);
        }
        private static async Task EnumerateContainersAsync(BlobServiceClient client)
        {        
            await foreach (BlobContainerItem container in client.GetBlobContainersAsync())
            {
                await Console.Out.WriteLineAsync($"Container:\t{container.Name}");
            }
    }
    }
    ```

1.  Simpan file **Program.cs**.

1.  Di jendela **Visual Studio Code**, pada Bilah Menu, pilih **Terminal** lalu pilih **Terminal Baru**.

1.  Di terminal, jalankan perintah berikut untuk menjalankan aplikasi web .NET:

    ```
    dotnet run
    ```

    > **Catatan**: Jika ada kesalahan pembuatan, tinjau file **Program.cs** di folder **Allfiles (F):\\Allfiles\\Labs\\03\\Solution\\BlobManager**.

1.  Amati output dari aplikasi konsol yang sedang berjalan. Output yang diperbarui mencakup daftar setiap kontainer yang ada di akun.

1.  Pilih **Kill Terminal** atau ikon **Keranjang Sampah** untuk menutup terminal yang sedang terbuka dan semua proses terkait.

#### <a name="review"></a>Tinjauan

Dalam latihan ini, Anda mengakses kontainer yang ada dengan menggunakan SDK Azure Storage.

### <a name="exercise-4-retrieve-blob-uniform-resource-identifiers-uris-by-using-the-net-sdk"></a>Latihan 4: Mengambil blob Pengidentifikasi Sumber Daya Seragam (URI) dengan menggunakan SDK .NET

#### <a name="task-1-enumerate-the-blobs-in-an-existing-container-by-using-the-sdk"></a>Tugas 1: Menghitung blob dalam kontainer yang ada dengan menggunakan SDK

1.  Di kelas **Program**, masukkan kode berikut untuk membuat metode **private static** baru bernama **EnumerateBlobsAsync** yang asinkron dan memiliki dua jenis parameter, **BlobServiceClient** dan **string**:

    ```csharp
    private static async Task EnumerateBlobsAsync(BlobServiceClient client, string containerName)
    {      
    }
    ```

1.  Dalam metode **EnumerateBlobsAsync**, masukkan kode berikut untuk mendapatkan instans baru kelas **BlobContainerClient** dengan menggunakan metode **GetBlobContainerClient** dari kelas **BlobServiceClient**, meneruskan parameter **kontainerName**:

    ```csharp
    BlobContainerClient container = client.GetBlobContainerClient(containerName);
    ```

1.  Dalam metode **EnumerateBlobsAsync**, masukkan kode berikut untuk merender nama kontainer yang akan dihitung:

    ```csharp
    await Console.Out.WriteLineAsync($"Searching:\t{container.Name}");
    ```

1.  Dalam metode **EnumerateBlobsAsync**, masukkan kode berikut untuk membuat perulangan **foreach** asinkron yang mengulangi hasil pemanggilan metode **GetBlobsAsync** dari kelas **BlobContainerClient**:

    ```csharp
    await foreach (BlobItem blob in container.GetBlobsAsync())
    {        
    }
    ```

1.  Dalam perulangan **foreach**, masukkan kode berikut untuk mencetak nama setiap blob:

    ```csharp
     await Console.Out.WriteLineAsync($"Existing Blob:\t{blob.Name}");
    ```

1.  Tinjauan metode **EnumerateBlobsAsync**, yang sekarang harus menyertakan:

    ```csharp
    private static async Task EnumerateBlobsAsync(BlobServiceClient client, string containerName)
    {      
        BlobContainerClient container = client.GetBlobContainerClient(containerName);
        await Console.Out.WriteLineAsync($"Searching:\t{container.Name}");
        await foreach (BlobItem blob in container.GetBlobsAsync())
        {        
             await Console.Out.WriteLineAsync($"Existing Blob:\t{blob.Name}");
        }
    }
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode untuk membuat variabel bernama *existingContainerName* dengan nilai **raster-graphics**:

    ```csharp
    string existingContainerName = "raster-graphics";
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode untuk memanggil metode **EnumerateBlobsAsync**, meneruskan variabel *serviceClient* dan *existingContainerName* sebagai parameter:

    ```csharp
    await EnumerateBlobsAsync(serviceClient, existingContainerName);
    ```

1.  Amati file **Program.cs**, yang sekarang harus menyertakan:

    ```csharp
    using Azure.Storage;
    using Azure.Storage.Blobs;
    using Azure.Storage.Blobs.Models;
    using System;
    using System.Threading.Tasks;
    public class Program
    {
        private const string blobServiceEndpoint = "your blobServiceEndpoint";
        private const string storageAccountName = "your storageAccountName";
        private const string storageAccountKey = "your storageAccountKey";
        public static async Task Main(string[] args) 
        {
            StorageSharedKeyCredential accountCredentials = new StorageSharedKeyCredential(storageAccountName, storageAccountKey);BlobServiceClient serviceClient = new   BlobServiceClient(new Uri(blobServiceEndpoint), accountCredentials);
            AccountInfo info = await serviceClient.GetAccountInfoAsync();
            await Console.Out.WriteLineAsync($"Connected to Azure Storage Account");
            await Console.Out.WriteLineAsync($"Account name:\t{storageAccountName}");
            await Console.Out.WriteLineAsync($"Account kind:\t{info?.AccountKind}");
            await Console.Out.WriteLineAsync($"Account sku:\t{info?.SkuName}");
            await EnumerateContainersAsync(serviceClient);
            string existingContainerName = "raster-graphics";
            await EnumerateBlobsAsync(serviceClient, existingContainerName);
        }
        private static async Task EnumerateContainersAsync(BlobServiceClient client)
        {        
            await foreach (BlobContainerItem container in client.GetBlobContainersAsync())
            {
                await Console.Out.WriteLineAsync($"Container:\t{container.Name}");
            }
        }
        private static async Task EnumerateBlobsAsync(BlobServiceClient client, string containerName)
        {      
            BlobContainerClient container = client.GetBlobContainerClient(containerName);await Console.Out.WriteLineAsync($"Searching:\t{container.Name}");
            await foreach (BlobItem blob in container.GetBlobsAsync())
            {        
                await Console.Out.WriteLineAsync($"Existing Blob:\t{blob.Name}");
            }
        }
    }
    ```


1.  Simpan file **Program.cs**.

1.  Di jendela **Visual Studio Code**, pada Bilah Menu, pilih **Terminal** lalu pilih **Terminal Baru**.

1.  Di terminal, jalankan perintah berikut untuk menjalankan aplikasi web .NET:

    ```
    dotnet run
    ```

    > **Catatan**: Jika ada kesalahan pembuatan, tinjau file **Program.cs** di folder **Allfiles (F):\\Allfiles\\Labs\\03\\Solution\\BlobManager**.

1.  Tinjauan output dari aplikasi konsol yang sedang berjalan. Output yang diperbarui mencakup metadata tentang kontainer dan blob yang ada.

1.  Pilih **Kill Terminal** atau ikon **Keranjang Sampah** untuk menutup terminal yang sedang terbuka dan semua proses terkait.

#### <a name="task-2-create-a-new-container-by-using-the-sdk"></a>Tugas 2: Membuat kontainer baru dengan menggunakan SDK

1.  Di kelas **Program**, masukkan kode berikut untuk membuat metode **private static** baru bernama **GetContainerAsync** yang asinkron dan memiliki dua jenis parameter, **BlobServiceClient** dan **string**:

    ```csharp
    private static async Task<BlobContainerClient> GetContainerAsync(BlobServiceClient client, string containerName)
    {      
    }
    ```

1.  Dalam metode **GetContainerAsync**, masukkan kode berikut untuk mendapatkan instans baru dari kelas **BlobContainerClient** dengan menggunakan metode **GetBlobContainerClient** dari kelas **BlobServiceClient**, meneruskan parameter **kontainerName**:

    ```csharp
    BlobContainerClient container = client.GetBlobContainerClient(containerName);
    ```

1.  Dalam metode **GetContainerAsync**, masukkan kode berikut untuk menjalankan metode **CreateIfNotExistsAsync** dari kelas **BlobContainerClient**:

    ```csharp
    await container.CreateIfNotExistsAsync(PublicAccessType.Blob);
    ```

1.  Dalam metode **GetContainerAsync**, masukkan kode berikut untuk merender nama kontainer yang berpotensi dibuat:

    ```csharp
    await Console.Out.WriteLineAsync($"New Container:\t{container.Name}");
    ```

1.  Dalam metode **GetContainerAsync**, masukkan kode berikut untuk mengembalikan instans kelas **BlobContainerClient** bernama **kontainer** sebagai hasil dari metode **GetContainerAsync** :

    ```csharp
    return container;
    ```

1.  Tinjauan metode **GetContainerAsync**, yang sekarang harus menyertakan:

    ```csharp
    private static async Task<BlobContainerClient> GetContainerAsync(BlobServiceClient client, string containerName)
    {      
        BlobContainerClient container = client.GetBlobContainerClient(containerName);
        await container.CreateIfNotExistsAsync(PublicAccessType.Blob);
        await Console.Out.WriteLineAsync($"New Container:\t{container.Name}");
        return container;
    }
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode untuk membuat variabel bernama *newContainerName* dengan nilai **vector-graphics**:

    ```csharp
    string newContainerName = "vector-graphics";
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode guna memanggil metode **GetContainerAsync**, untuk meneruskan variabel *serviceClient* dan *newContainerName* sebagai parameter, dan untuk menyimpan hasilnya dalam variabel bernama *kontainerClient* dengan jenis **BlobContainerClient**:

    ```csharp
    BlobContainerClient containerClient = await GetContainerAsync(serviceClient, newContainerName);
    ```

1.  Tinjauan file **Program.cs**, yang sekarang harus menyertakan:
    ```csharp
    using Azure.Storage;
    using Azure.Storage.Blobs;
    using Azure.Storage.Blobs.Models;
    using System;
    using System.Threading.Tasks;
    public class Program
    {
        private const string blobServiceEndpoint = "your blobServiceEndpoint";
        private const string storageAccountName = "your storageAccountName";
        private const string storageAccountKey = "your storageAccountKey";
        public static async Task Main(string[] args) 
        {
            StorageSharedKeyCredential accountCredentials = new StorageSharedKeyCredential(storageAccountName, storageAccountKey);BlobServiceClient serviceClient = new BlobServiceClient(new Uri(blobServiceEndpoint), accountCredentials);
            AccountInfo info = await serviceClient.GetAccountInfoAsync();
            await Console.Out.WriteLineAsync($"Connected to Azure Storage Account");
            await Console.Out.WriteLineAsync($"Account name:\t{storageAccountName}");
            await Console.Out.WriteLineAsync($"Account kind:\t{info?.AccountKind}");
            await Console.Out.WriteLineAsync($"Account sku:\t{info?.SkuName}");
            await EnumerateContainersAsync(serviceClient);
            string existingContainerName = "raster-graphics";
            await EnumerateBlobsAsync(serviceClient, existingContainerName);
            string newContainerName = "vector-graphics";
            BlobContainerClient containerClient = await GetContainerAsync(serviceClient, newContainerName);
        }
        private static async Task EnumerateContainersAsync(BlobServiceClient client)
        {        
            await foreach (BlobContainerItem container in client.GetBlobContainersAsync())
            {
                await Console.Out.WriteLineAsync($"Container:\t{container.Name}");
            }
        }
        private static async Task EnumerateBlobsAsync(BlobServiceClient client, string containerName)
        {      
            BlobContainerClient container = client.GetBlobContainerClient(containerName);await Console.Out.WriteLineAsync($"Searching:\t{container.Name}");
            await foreach (BlobItem blob in container.GetBlobsAsync())
            {        
                await Console.Out.WriteLineAsync($"Existing Blob:\t{blob.Name}");
            }
        }
        private static async Task<BlobContainerClient> GetContainerAsync(BlobServiceClient client, string containerName)
        {      
            BlobContainerClient container = client.GetBlobContainerClient(containerName);await container.CreateIfNotExistsAsync(PublicAccessType.Blob);
            await Console.Out.WriteLineAsync($"New Container:\t{container.Name}");
            return container;
        }
    }
    ```

1.  Simpan file **Program.cs**.

1.  Di jendela **Visual Studio Code**, pada Bilah Menu, pilih **Terminal** lalu pilih **Terminal Baru**.

1.  Di terminal, jalankan perintah berikut untuk menjalankan aplikasi web .NET:

    ```
    dotnet run
    ```

    > **Catatan**: Jika ada kesalahan pembuatan, tinjau file **Program.cs** di folder **Allfiles (F):\\Allfiles\\Labs\\03\\Solution\\BlobManager**.

1.  Amati output dari aplikasi konsol yang sedang berjalan. Output yang diperbarui mencakup metadata tentang kontainer dan blob yang ada.

1.  Pilih **Kill Terminal** atau ikon **Keranjang Sampah** untuk menutup terminal yang sedang terbuka dan semua proses terkait.

#### <a name="task-3-upload-a-new-blob-by-using-the-portal"></a>Tugas 3: Mengunggah blob baru dengan menggunakan portal

1.  Di panel **navigasi** portal Microsoft Azure, pilih tautan **Grup sumber daya**.

1.  Pada panel **Grup sumber daya**, pilih grup sumber daya **StorageMedia** yang Anda buat sebelumnya di lab ini.

1.  Pada panel **StorageMedia**, pilih akun penyimpanan **mediastor** _[namaanda]_ yang Anda buat sebelumnya di lab ini.

1.  Pada panel **Akun penyimpanan**, pilih tautan **Kontainer** di bagian **Penyimpanan data**.

1.  Di bagian **Kontainer**, pilih kontainer **vector-graphics** yang baru dibuat. Anda mungkin perlu merefresh halaman untuk mengamati kontainer baru.

1.  Pada panel **Kontainer**, pilih **Unggah**.

1.  Di jendela **Unggah blob**, lakukan tindakan berikut, lalu pilih **Unggah**:

    | Pengaturan                           | Tindakan                                                       |
    | --------------------------------- | ------------------------------------------------------------ |
    | Bagian **File**   | Pilih ikon **Folder**.                                    |
    | Jendela **File Explorer**        |  **Allfiles (F):\\Allfiles\\Labs\\03\\Starter\\Images**, pilih file **graph.svg**, lalu pilih **Buka**. |
    | Kotak centang **Timpa jika file sudah ada** | Pastikan bahwa kotak centang dipilih.                        |

    > **Catatan**: Tunggu hingga blob diunggah sebelum Anda melanjutkan dengan lab ini.

#### <a name="task-4-access-blob-uri-by-using-the-sdk"></a>Tugas 4: Mengakses URI blob dengan menggunakan SDK

1.  Beralih ke jendela **Visual Studio Code**.

1.  Di kelas **Program**, masukkan kode berikut untuk membuat metode **private static** baru bernama **GetBlobAsync** yang asinkron dan memiliki dua jenis parameter, **BlobContainerClient** dan **string**:

    ```csharp
    private static async Task<BlobClient> GetBlobAsync(BlobContainerClient client, string blobName)
    {      
    }
    ```

1.  Dalam metode **GetBlobAsync**, masukkan kode berikut untuk mendapatkan instans baru dari kelas **BlobClient** dengan menggunakan metode **GetBlobClient** dari kelas **BlobContainerClient**, dan untuk meneruskan parameter **blobName**:

    ```csharp
    BlobClient blob = client.GetBlobClient(blobName);
    ```

1.  Dalam metode **GetBlobAsync**, masukkan kode berikut untuk merender nama blob yang dirujuk:

    ```csharp
    await Console.Out.WriteLineAsync($"Blob Found:\t{blob.Name}");
    ```

1.  Dalam metode **GetBlobAsync**, masukkan kode berikut untuk mengembalikan instans kelas **BlobClient** bernama **blob** sebagai hasil dari metode **GetBlobAsync** :

    ```csharp
    return blob;
    ```

1.  Tinjauan metode **GetBlobAsync**, yang sekarang harus menyertakan:

    ```csharp
    private static async Task<BlobClient> GetBlobAsync(BlobContainerClient client, string blobName)
    {      
        BlobClient blob = client.GetBlobClient(blobName);
        await Console.Out.WriteLineAsync($"Blob Found:\t{blob.Name}");
        return blob;
    }
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode untuk membuat variabel bernama *uploadedBlobName* dengan nilai **graph.svg**:

    ```csharp
    string uploadedBlobName = "graph.svg";
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode untuk memanggil metode **GetBlobAsync**, meneruskan variabel *kontainerClient* dan *uploadedBlobName* sebagai parameter, dan untuk menyimpan hasilnya dalam variabel bernama *blobClient* dengan jenis **BlobClient**:

    ```csharp
    BlobClient blobClient = await GetBlobAsync(containerClient, uploadedBlobName);
    ```

1.  Dalam metode **Main**, masukkan kode berikut di akhir metode untuk merender properti **Uri** dari variabel *blobClient*:

    ```csharp
    await Console.Out.WriteLineAsync($"Blob Url:\t{blobClient.Uri}");
    ```

1.  Amati file **Program.cs**, yang sekarang harus menyertakan:

    ```csharp
    using Azure.Storage;
    using Azure.Storage.Blobs;
    using Azure.Storage.Blobs.Models;
    using System;
    using System.Threading.Tasks;
    public class Program
    {
        private const string blobServiceEndpoint = "your blobServiceEndpoint";
        private const string storageAccountName = "your storageAccountName";
        private const string storageAccountKey = "your storageAccountKey";
        public static async Task Main(string[] args)
        {
            StorageSharedKeyCredential accountCredentials = new StorageSharedKeyCredential(storageAccountName, storageAccountKey); BlobServiceClient serviceClient = new BlobServiceClient(new Uri(blobServiceEndpoint), accountCredentials);
            
            AccountInfo info = await serviceClient.GetAccountInfoAsync();
            
            await Console.Out.WriteLineAsync($"Connected to Azure Storage Account");
            await Console.Out.WriteLineAsync($"Account name:\t{storageAccountName}");
            await Console.Out.WriteLineAsync($"Account kind:\t{info?.AccountKind}");
            await Console.Out.WriteLineAsync($"Account sku:\t{info?.SkuName}");
            await EnumerateContainersAsync(serviceClient);
            
            string existingContainerName = "raster-graphics";
            await EnumerateBlobsAsync(serviceClient, existingContainerName);
            
            string newContainerName = "vector-graphics";
            BlobContainerClient containerClient = await GetContainerAsync(serviceClient, newContainerName);
            
            string uploadedBlobName = "graph.svg";
            BlobClient blobClient = await GetBlobAsync(containerClient, uploadedBlobName);
            
            await Console.Out.WriteLineAsync($"Blob Url:\t{blobClient.Uri}");
        }
        private static async Task EnumerateContainersAsync(BlobServiceClient client)
        {
            await foreach (BlobContainerItem container in client.GetBlobContainersAsync())
            {
                await Console.Out.WriteLineAsync($"Container:\t{container.Name}");
            }
        }
        private static async Task EnumerateBlobsAsync(BlobServiceClient client, string containerName)
        {
            BlobContainerClient container = client.GetBlobContainerClient(containerName); await Console.Out.WriteLineAsync($"Searching:\t{container.Name}");
            await foreach (BlobItem blob in container.GetBlobsAsync())
            {
                await Console.Out.WriteLineAsync($"Existing Blob:\t{blob.Name}");
            }
        }
        private static async Task<BlobContainerClient> GetContainerAsync(BlobServiceClient client, string containerName)
        {
            BlobContainerClient container = client.GetBlobContainerClient(containerName); await container.CreateIfNotExistsAsync(PublicAccessType.Blob);
            await Console.Out.WriteLineAsync($"New Container:\t{container.Name}");
            return container;
        }
        private static async Task<BlobClient> GetBlobAsync(BlobContainerClient client, string blobName)
        {
            BlobClient blob = client.GetBlobClient(blobName);
            await Console.Out.WriteLineAsync($"Blob Found:\t{blob.Name}");
            return blob;
        }
    }
    ```

1.  Simpan file **Program.cs**.

1.  Di jendela **Visual Studio Code**, aktifkan menu pintasan untuk panel **Explorer**, lalu pilih **Buka di Terminal Terpadu**.

1.  Pada perintah buka, jalankan perintah berikut untuk menjalankan aplikasi web .NET:

    ```
    dotnet run
    ```

    > **Catatan**: Jika ada kesalahan pembuatan, tinjau file **Program.cs** di folder **Allfiles (F):\\Allfiles\\Labs\\03\\Solution\\BlobManager**.

1.  Amati output dari aplikasi konsol yang sedang berjalan. Output yang diperbarui mencakup URL final untuk mengakses blob secara online. Catat nilai URL ini untuk digunakan nanti di lab.

    > **Catatan**: URL kemungkinan akan mirip dengan string berikut: `https://mediastor*[yourname]*.blob.core.windows.net/vector-graphics/graph.svg`

1.  Pilih **Kill Terminal** atau ikon **Keranjang Sampah** untuk menutup terminal yang sedang terbuka dan semua proses terkait.

#### <a name="task-5-test-the-uri-by-using-a-browser"></a>Tugas 5: Menguji URI dengan menggunakan browser

1.  Pada taskbar, aktifkan menu pintasan untuk ikon **Microsoft Edge**, lalu pilih **Jendela baru**.

1.  Di jendela browser baru, lihat URL yang sebelumnya Anda salin di lab ini untuk blob.

1.  Anda sekarang akan melihat file Scalable Vector Graphics (SVG) di jendela browser Anda.

#### <a name="review"></a>Tinjauan

Dalam latihan ini, Anda membuat kontainer dan mengelola blob dengan menggunakan SDK Pernyimpanan.

### <a name="exercise-5-clean-up-your-subscription"></a>Latihan 5: Membersihkan langganan Anda

#### <a name="task-1-open-azure-cloud-shell-and-list-resource-groups"></a>Tugas 1: Membuka Azure Cloud Shell dan daftar grup sumber daya

1.  Di portal Microsoft Azure, pilih ikon **Cloud Shell** ![ikon Cloud Shell](./media/az204_lab_CloudShell.png) untuk membuka sesi Bash baru. Jika Cloud Shell default ke sesi PowerShell, pilih **PowerShell** dan, di menu drop-down, pilih **Bash**.

    > **Catatan**: Jika ini adalah pertama kalinya Anda memulai **Cloud Shell**, saat diminta untuk memilih **Bash** atau **PowerShell**, pilih **PowerShell**. Saat Anda melihat pesan **Anda tidak memiliki penyimpanan yang terpasang**, pilih langganan yang Anda gunakan di lab ini, lalu pilih **Buat penyimpanan**.

#### <a name="task-2-delete-a-resource-group"></a>Tugas 2: Menghapus grup sumber daya

1.  Pada panel **Cloud Shell**, jalankan perintah berikut untuk menghapus grup sumber daya **StorageMedia**:

    ```
    az group delete --name StorageMedia --no-wait --yes
    ```

    > **Catatan**: Perintah dijalankan secara tidak sinkron (seperti yang ditentukan oleh parameter *--no-wait*), jadi sementara Anda dapat menjalankan perintah Azure CLI lain segera setelahnya dalam sesi Bash yang sama, perintah ini akan memerlukan waktu beberapa menit sebelum kelompok sumber daya benar-benar dihapus.

1. Tutup panel **Cloud Shell** di portal.

#### <a name="task-3-close-the-active-application"></a>Tugas 3: Menutup aplikasi yang aktif

- Tutup aplikasi Microsoft Edge yang sedang berjalan.

#### <a name="review"></a>Tinjauan

Dalam latihan ini, Anda akan membersihkan langganan dengan menghapus grup sumber daya yang digunakan di lab ini.
